<div class="container">

  <div class="col-sm-12">

    <div class="container">

      <div class="row my-2">

        <div class="col-lg-8 order-lg-2 shadow-sm">

          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a href="" data-target="#profile" data-toggle="tab" class="nav-link active">Profile</a>
            </li>
            <li class="nav-item">
              <a href="" data-target="#messages" data-toggle="tab" class="nav-link">Messages</a>
            </li>
            <li class="nav-item">
              <a href="" data-target="#edit" data-toggle="tab" class="nav-link">Edit</a>
            </li>
          </ul>

          <div class="tab-content py-4">
            <div class="tab-pane active" id="profile">
              <h5 class="mb-3">User Profile</h5>
              <br>
              <div class="row">
                <div class="col-md-6">
                  <h6>About</h6>
                  <hr>
                  <p>{{appearance.about}}</p>
                  <h6>Hobbies</h6>
                  <hr>
                  <p>{{appearance.hobbies}}</p>
                </div>
                <div class="col-md-6">
                  <h6>Appearance</h6>
                  <hr>
                  <b>Eyes: </b> {{appearance.eyes}}
                  <br>
                  <b>Hair colour: </b> {{appearance.hairColour}}
                  <br>
                  <b>Height: </b> {{appearance.height}} cm
                  <br>
                  <b>Physique: </b> {{appearance.physique}}
                  <br>
                  <br>
                  <h6>Other</h6>
                  <hr>
                  <b>Country: </b> {{personalDetails.country}}
                  <br>
                  <b>City: </b> {{personalDetails.city}}
                  <br>
                  <b>Occupation: </b> {{personalDetails.occupation}}
                  <br>
                  <b>Marital status: </b> {{personalDetails.maritalStatus}}
                  <br>
                  <b>Education: </b> {{personalDetails.education}}
                  <br>
                  <b>Religion: </b> {{personalDetails.religion}}

                </div>

              </div>
              <!--/row-->
            </div>

            <div class="tab-pane" id="messages">
              <div class="alert alert-info alert-dismissable">
                <a class="panel-close" data-dismiss="alert"> This is an <strong>.alert</strong>. Use this to show important messages to the user.</a><button class="btn btn-danger">x</button>
              </div>

              <div class="card mb-3 shadow-sm" style="max-width:700px; max-height: 160px">
                <div class="row no-gutters">
                  <div class="col-md-2">
                    <img src="https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?cs=srgb&dl=beautiful-blur-blurred-background-733872.jpg&fm=jpg" class="card-img" alt="...">
                    <p  class="text-center"><small><b>Margarita</b></small></p>
                  </div>
                  <div class="col-md-8">
                    <div class="card-body">
                      <p class="card-text"><small>Hey, You looks stunning. I want to spend some time with You, send me a PM.  Hey, You looks stunning. I want to spend some time with You, send me a PM</small></p>
                      <hr>
                      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card mb-3 shadow-sm" style="max-width:700px; max-height: 160px">
                <div class="row no-gutters">
                  <div class="col-md-2">
                    <img src="https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?cs=srgb&dl=beautiful-blur-blurred-background-733872.jpg&fm=jpg" class="card-img" alt="...">
                    <p  class="text-center"><small><b>Margarita</b></small></p>
                  </div>
                  <div class="col-md-8">
                    <div class="card-body">
                      <p class="card-text"><small>Hey, You looks stunning.</small></p>
                      <hr>
                      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card mb-3 shadow-sm" style="max-width:700px; max-height: 160px">
                <div class="row no-gutters">
                  <div class="col-md-2">
                    <img src="https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?cs=srgb&dl=beautiful-blur-blurred-background-733872.jpg&fm=jpg" class="card-img" alt="...">
                    <p  class="text-center"><small><b>Margarita</b></small></p>
                  </div>
                  <div class="col-md-8">
                    <div class="card-body">
                      <p class="card-text"><small>Hey, You looks stunning. I want to spend some time with You, send me a PM.</small></p>
                      <hr>
                      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                    </div>
                  </div>
                </div>
              </div>


            </div>
            <div class="tab-pane" id="edit">
              <form (ngSubmit)="onSubmit()">
                <h4 class="text-center">Personal details</h4>
                <div class="form-group row">
                  <label for="FirstName" class="col-lg-3 col-form-label form-control-label">First Name</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="FirstName" type="text" required [(ngModel)]="user.firstName" name="firstName">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Email" class="col-lg-3 col-form-label form-control-label">Email</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="Email" type="email" required [(ngModel)]="user.email" name="email">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="DateOfBirth" class="col-lg-3 col-form-label form-control-label">Date Of Birth</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="DateOfBirth" type="date" required [(ngModel)]="personalDetails.dateOfBirth" name="dateOfBirth">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Country" class="col-lg-3 col-form-label form-control-label">Country</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="Country" type="text" required [(ngModel)]="personalDetails.country" name="country">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="City" class="col-lg-3 col-form-label form-control-label">City</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="City" type="text" required [(ngModel)]="personalDetails.city" name="city">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Occupation" class="col-lg-3 col-form-label form-control-label">Occupation</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="Occupation" type="text" [(ngModel)]="personalDetails.occupation" name="occupation">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="MaritalStatus" class="col-lg-3 col-form-label form-control-label">Marital status</label>
                  <div class="col-lg-9">
                    <select id="MaritalStatus" class="form-control" size="0" [(ngModel)]="personalDetails.maritalStatus" name="maritalStatus">
                      <option value="MARRIED">Married</option>
                      <option value="WIDOWED">Widowed</option>
                      <option value="SEPARATED">Separated</option>
                      <option value="DIVORCED">Divorced</option>
                      <option value="SINGLE">Single</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Education" class="col-lg-3 col-form-label form-control-label">Education</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="Education" type="text" [(ngModel)]="personalDetails.education" name="education">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Religion" class="col-lg-3 col-form-label form-control-label">Religion</label>
                  <div class="col-lg-9">
                    <select id="Religion" class="form-control" size="0" [(ngModel)]="personalDetails.religion" name="religion">
                      <option value="CHRISTIANITY">Christianity</option>
                      <option value="ISLAM">Islam</option>
                      <option value="HINDUISM">Hinduism</option>
                      <option value="BUDDHISM">Buddhism</option>
                      <option value="JUDAISM">Judaism</option>
                      <option value="ATHEIST">Atheist</option>
                    </select>
                  </div>
                </div>
                <br>
                <h4 class="text-center">Appearance</h4>
                <div class="form-group row">
                  <label for="Eyes" class="col-lg-3 col-form-label form-control-label">Eyes</label>
                  <div class="col-lg-9">
                    <select id="Eyes" class="form-control" size="0" [(ngModel)]="appearance.eyes" name="eyes">
                      <option value="BLUE">Blue</option>
                      <option value="BROWN">Brown</option>
                      <option value="GREEN">Green</option>
                      <option value="HAZEL ">Hazel</option>
                      <option value="GREY">Grey</option>
                      <option value="AMBER">Amber</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="HairColour" class="col-lg-3 col-form-label form-control-label">Hair colour</label>
                  <div class="col-lg-9">
                    <select id="HairColour" class="form-control" size="0" [(ngModel)]="appearance.hairColour" name="hairColour">
                      <option value="BLACK">Black</option>
                      <option value="DARK_BROWN">Dark brown</option>
                      <option value="LIGHT_BROWN">Light brown</option>
                      <option value="BROWN">Brown</option>
                      <option value="DARK_BLONDE">Dark blonde</option>
                      <option value="LIGHT_BLONDE">Light blonde</option>
                      <option value="BLONDE">Blonde</option>
                      <option value="GINGER_RED">Ginger red</option>
                      <option value="GREY">Grey</option>
                      <option value="WHITE">White</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Height" class="col-lg-3 col-form-label form-control-label">Height</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="Height" type="number" min="140" max="210" [(ngModel)]="appearance.height" name="height">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Physique" class="col-lg-3 col-form-label form-control-label">Physique</label>
                  <div class="col-lg-9">
                    <select id="Physique" class="form-control" size="0" [(ngModel)]="appearance.physique" name="physique">
                      <option value="SKINNY">Skinny</option>
                      <option value="SLIM">Slim</option>
                      <option value="NORMAL">Normal</option>
                      <option value="SHAPELY">Shapely</option>
                      <option value="MUSCULAR">Muscular</option>
                      <option value="THICK">Thick</option>
                      <option value="FAT">Fat</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label for="WriteAboutYourself">Write about yourself</label>
                  <textarea class="form-control" id="WriteAboutYourself" rows="3" [(ngModel)]="appearance.about" name="about"></textarea>
                </div>
                <div class="form-group">
                  <label for="Hobbies">Hobbies</label>
                  <textarea class="form-control" id="Hobbies" rows="3" [(ngModel)]="appearance.hobbies" name="hobbies"></textarea>
                </div>
                <br><br>

                <div class="form-group row">
                  <label class="col-lg-3 col-form-label form-control-label"></label>
                  <div class="col-lg-9">
                    <input type="reset" class="btn btn-secondary" value="Cancel">
                    <input type="submit" class="btn btn-primary" value="Save Changes">
                  </div>
                </div>

              </form>

              <br><br>

              <form (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm">

                <h4 class="text-center">Account details</h4>
                <div class="form-group row">
                  <label for="TimeZone" class="col-lg-3 col-form-label form-control-label">Time Zone</label>
                  <div class="col-lg-9">
                    <select id="TimeZone" class="form-control" size="0" [(ngModel)]="user.timeZoneId" name="timeZoneId">
                      <option value="Hawaii">(GMT-10:00) Hawaii</option>
                      <option value="Alaska">(GMT-09:00) Alaska</option>
                      <option value="Pacific Time (US &amp; Canada)">(GMT-08:00) Pacific Time (US &amp; Canada)</option>
                      <option value="Arizona">(GMT-07:00) Arizona</option>
                      <option value="Mountain Time (US &amp; Canada)">(GMT-07:00) Mountain Time (US &amp; Canada)</option>
                      <option value="Central Time (US &amp; Canada)" selected="selected">(GMT-06:00) Central Time (US &amp; Canada)</option>
                      <option value="Eastern Time (US &amp; Canada)">(GMT-05:00) Eastern Time (US &amp; Canada)</option>
                      <option value="Indiana (East)">(GMT-05:00) Indiana (East)</option>
                      <option value="Atlantic Standard Time (Canada)">(GMT-04:00) Atlantic Standard Time (Canada)</option>
                      <option value="Argentina Time">(GMT-03:00) Argentina Time</option>
                      <option value="Azores Time">(GMT-02:00) Azores Time</option>
                      <option value="West Africa Time">(GMT-01:00) West Africa Time</option>
                      <option value="Central European Time">(GMT+01:00) Central European Time</option>
                      <option value="Eastern European Time">(GMT+02:00) Eastern European Time (Kaliningrad)</option>
                      <option value="Moscow Time">(GMT+03:00) Moscow Time</option>
                      <option value="Caucasus Time">(GMT+04:00) Samara, Armenia, Azerbaidjan, Georgia, Mauritius Times</option>
                      <option value="Pakistan Standard Time">(GMT+05:00) Pakistan Standard Time</option>
                      <option value="Bangladesh Standard Time">(GMT+06:00) Bangladesh Standard Time</option>
                      <option value="Christmas Island Time (Australia)">(GMT+07:00) Christmas Island Time (Australia)</option>
                      <option value="China Standard Time">(GMT+08:00) China Standard Time</option>
                      <option value="Japan Standard Time">(GMT+09:00) Japan Standard Time</option>
                      <option value="East Australian Standard Time">(GMT+10:00) East Australian Standard Time</option>
                      <option value="Sakhalin Time">(GMT+11:00) Sakhalin Time</option>
                      <option value="New Zealand Standard Time">(GMT+12:00) New Zealand Standard Time</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Username" class="col-lg-3 col-form-label form-control-label">Username</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="Username" type="text" required [(ngModel)]="user.username" #username="ngModel" name="username">
                    <div class="alert alert-danger" *ngIf="f.submitted && username.invalid">
                      <div *ngIf="username.errors.required">UserName is required</div>
                    </div>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Password" class="col-lg-3 col-form-label form-control-label">Password</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="Password" type="password" required [(ngModel)]="user.password" #password="ngModel" name="password" minlength="6">
                    <div class="alert alert-danger" *ngIf="f.submitted && password.invalid">
                      <div *ngIf="password.errors.required">Password is required</div>
                      <div *ngIf="password.errors.minlength">Password must be at least 6 characters</div>
                    </div>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="ConfirmPassword" class="col-lg-3 col-form-label form-control-label">Confirm password</label>
                  <div class="col-lg-9">
                    <input class="form-control" id="ConfirmPassword" type="password" required [(ngModel)]="user.repeatedPassword" name="repeatedPassword" #repeatedPassword="ngModel">
                    <div class="alert alert-danger" *ngIf="f.submitted && repeatedPassword.invalid">
                      <div *ngIf="repeatedPassword.errors.required">Password is required</div>
                      <div *ngIf="repeatedPassword.errors.minlength">Password must be at least 6 characters</div>
                    </div>
                  </div>
                </div>

                <div class="form-group row">
                  <label class="col-lg-3 col-form-label form-control-label"></label>
                  <div class="col-lg-9">
                    <input type="reset" class="btn btn-secondary" value="Cancel">
                    <input type="submit" class="btn btn-danger" value="Change Account Data">
                  </div>
                  <div *ngIf="f.submitted && isChangeDataFailed" class="alert alert-danger">
                    Changing data failed!<br/>{{errorMessage}}
                  </div>
                </div>

              </form>

            </div>
          </div>
        </div>

        <div class="col-lg-4 order-lg-1 text-center">
          <img *ngIf="personalDetails.photo" src="data:image/png;base64,{{personalDetails.photo}}" class="mx-auto img-fluid img-circle d-block shadow" alt="avatar">
          <h6 class="mt-2">{{user.firstName}}, {{calculateAge(personalDetails)}} years old</h6>

          <label for="File" class=" col-form-label form-control-label">
            <input type="file" id="File" class="custom-file-input" (change)="onFileSelected($event)">
            <span class="custom-file-control btn btn-primary">Change avatar</span>
          </label>
            <button type="button" class="btn btn-success" [disabled]="!selectedFiles" (click)="onUpload()">Upload</button>


          <br><br>
          <h3>Rate</h3>
          <ngb-rating [(rate)]="currentRate" max="6" >
            <ng-template let-fill="fill" let-index="index" >
              <span class="star" [class.filled]="fill === 100"
                    [class.star-size-0]="index == 0" [class.star-size-1]="index == 1" [class.star-size-2]="index == 2" [class.star-size-3]="index == 3"
                    [class.star-size-4]="index == 4" [class.star-size-5]="index == 5">&#9733;</span>
            </ng-template>
          </ngb-rating>
          <hr>
          <button type="button" class="btn btn-success" (click)="onVote(vote)">Vote</button>
          <pre class="text-right">Rate: <b> {{vote.rating}} </b></pre>

        </div>

      </div>

    </div>

  </div>

</div>
